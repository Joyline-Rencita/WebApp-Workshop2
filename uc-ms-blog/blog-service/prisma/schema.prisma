// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "./prismaUcMasterClient/"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum roleType {
  SUPER
  OWNER
  ADMIN
  DEVELOPER
  USER
  BILLING
  VIEWER

  @@map("role_type")
}

enum cognitoStatus {
  USER_CREATED
  USER_MIGRATED
  USER_NOT_MIGRATED

  @@map("cognito_status")
}

model authUser {
  authUserId        Int?     @unique @map("auth_user_id")
  emailId           String   @unique @map("email_id") @db.VarChar(255)
  firstName         String?  @map("first_name") @db.VarChar(255)
  lastName          String?  @map("last_name") @db.VarChar(255)
  refreshToken      String?  @map("refresh_token") @db.VarChar(255)
  verificationToken String?  @map("verification_token") @db.VarChar(255)
  blocked           Boolean  @default(false)
  notes             String?
  created           DateTime @default(now())
  lastUpdated       DateTime @updatedAt @map("last_updated")

  @@unique([emailId, authUserId])
  @@map("auth_user")
}

model legacyAuthUser {
  authUserId                   Int            @id @map("auth_user_id")
  cognitoStatus                cognitoStatus? @map("cognito_status")
  cognitoPasswordPolicyApplied Boolean?       @map("cognito_password_policy_applied")

  @@map("legacy_auth_user")
}

model accAccountUserRole {
  accUserRoleId Int       @default(autoincrement()) @map("acc_account_user_role_map_id")
  roleType      roleType? @map("role_type")
  accAccId      String    @map("acc_account_id") @db.VarChar(255)
  authUserId    Int       @map("auth_user_id")
  isActive      Boolean?  @default(true) @map("is_active")

  @@unique([authUserId, accAccId])
  @@map("acc_account_user_role_map")
}

model authOidcUserInfo {
  oidcUserInfoId BigInt @default(autoincrement()) @map("auth_oidc_user_info_id")
  authUserId     Int    @map("auth_user_id")
  providerName   String @map("provider_name")
  data           Json

  @@unique([authUserId, providerName])
  @@map("auth_oidc_user_info")
}
